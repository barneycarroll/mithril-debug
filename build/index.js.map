{"version":3,"file":null,"sources":["../../../../../../\u0000commonjsHelpers","../node_modules/mithril/mithril.js","../src/utils/on.js","../src/utils/box.js","../src/utils/drag.js","../src/view/widget.js","../src/index.js"],"sourcesContent":["\nexport var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {}\n\nexport function createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}",";(function (global, factory) { // eslint-disable-line\r\n\t\"use strict\"\r\n\t/* eslint-disable no-undef */\r\n\tvar m = factory(global)\r\n\tif (typeof module === \"object\" && module != null && module.exports) {\r\n\t\tmodule.exports = m\r\n\t} else if (typeof define === \"function\" && define.amd) {\r\n\t\tdefine(function () { return m })\r\n\t} else {\r\n\t\tglobal.m = m\r\n\t}\r\n\t/* eslint-enable no-undef */\r\n})(typeof window !== \"undefined\" ? window : this, function (global, undefined) { // eslint-disable-line\r\n\t\"use strict\"\r\n\r\n\tm.version = function () {\r\n\t\treturn \"v0.2.5\"\r\n\t}\r\n\r\n\tvar hasOwn = {}.hasOwnProperty\r\n\tvar type = {}.toString\r\n\r\n\tfunction isFunction(object) {\r\n\t\treturn typeof object === \"function\"\r\n\t}\r\n\r\n\tfunction isObject(object) {\r\n\t\treturn type.call(object) === \"[object Object]\"\r\n\t}\r\n\r\n\tfunction isString(object) {\r\n\t\treturn type.call(object) === \"[object String]\"\r\n\t}\r\n\r\n\tvar isArray = Array.isArray || function (object) {\r\n\t\treturn type.call(object) === \"[object Array]\"\r\n\t}\r\n\r\n\tfunction noop() {}\r\n\r\n\tvar voidElements = {\r\n\t\tAREA: 1,\r\n\t\tBASE: 1,\r\n\t\tBR: 1,\r\n\t\tCOL: 1,\r\n\t\tCOMMAND: 1,\r\n\t\tEMBED: 1,\r\n\t\tHR: 1,\r\n\t\tIMG: 1,\r\n\t\tINPUT: 1,\r\n\t\tKEYGEN: 1,\r\n\t\tLINK: 1,\r\n\t\tMETA: 1,\r\n\t\tPARAM: 1,\r\n\t\tSOURCE: 1,\r\n\t\tTRACK: 1,\r\n\t\tWBR: 1\r\n\t}\r\n\r\n\t// caching commonly used variables\r\n\tvar $document, $location, $requestAnimationFrame, $cancelAnimationFrame\r\n\r\n\t// self invoking function needed because of the way mocks work\r\n\tfunction initialize(mock) {\r\n\t\t$document = mock.document\r\n\t\t$location = mock.location\r\n\t\t$cancelAnimationFrame = mock.cancelAnimationFrame || mock.clearTimeout\r\n\t\t$requestAnimationFrame = mock.requestAnimationFrame || mock.setTimeout\r\n\t}\r\n\r\n\t// testing API\r\n\tm.deps = function (mock) {\r\n\t\tinitialize(global = mock || window)\r\n\t\treturn global\r\n\t}\r\n\r\n\tm.deps(global)\r\n\r\n\t/**\r\n\t * @typedef {String} Tag\r\n\t * A string that looks like -> div.classname#id[param=one][param2=two]\r\n\t * Which describes a DOM node\r\n\t */\r\n\r\n\tfunction parseTagAttrs(cell, tag) {\r\n\t\tvar classes = []\r\n\t\tvar parser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[.+?\\])/g\r\n\t\tvar match\r\n\r\n\t\twhile ((match = parser.exec(tag))) {\r\n\t\t\tif (match[1] === \"\" && match[2]) {\r\n\t\t\t\tcell.tag = match[2]\r\n\t\t\t} else if (match[1] === \"#\") {\r\n\t\t\t\tcell.attrs.id = match[2]\r\n\t\t\t} else if (match[1] === \".\") {\r\n\t\t\t\tclasses.push(match[2])\r\n\t\t\t} else if (match[3][0] === \"[\") {\r\n\t\t\t\tvar pair = /\\[(.+?)(?:=(\"|'|)(.*?)\\2)?\\]/.exec(match[3])\r\n\t\t\t\tcell.attrs[pair[1]] = pair[3] || \"\"\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn classes\r\n\t}\r\n\r\n\tfunction getVirtualChildren(args, hasAttrs) {\r\n\t\tvar children = hasAttrs ? args.slice(1) : args\r\n\r\n\t\tif (children.length === 1 && isArray(children[0])) {\r\n\t\t\treturn children[0]\r\n\t\t} else {\r\n\t\t\treturn children\r\n\t\t}\r\n\t}\r\n\r\n\tfunction assignAttrs(target, attrs, classes) {\r\n\t\tvar classAttr = \"class\" in attrs ? \"class\" : \"className\"\r\n\r\n\t\tfor (var attrName in attrs) {\r\n\t\t\tif (hasOwn.call(attrs, attrName)) {\r\n\t\t\t\tif (attrName === classAttr &&\r\n\t\t\t\t\t\tattrs[attrName] != null &&\r\n\t\t\t\t\t\tattrs[attrName] !== \"\") {\r\n\t\t\t\t\tclasses.push(attrs[attrName])\r\n\t\t\t\t\t// create key in correct iteration order\r\n\t\t\t\t\ttarget[attrName] = \"\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[attrName] = attrs[attrName]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (classes.length) target[classAttr] = classes.join(\" \")\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param {Tag} The DOM node tag\r\n\t * @param {Object=[]} optional key-value pairs to be mapped to DOM attrs\r\n\t * @param {...mNode=[]} Zero or more Mithril child nodes. Can be an array,\r\n\t *                      or splat (optional)\r\n\t */\r\n\tfunction m(tag, pairs) {\r\n\t\tvar args = []\r\n\r\n\t\tfor (var i = 1, length = arguments.length; i < length; i++) {\r\n\t\t\targs[i - 1] = arguments[i]\r\n\t\t}\r\n\r\n\t\tif (isObject(tag)) return parameterize(tag, args)\r\n\r\n\t\tif (!isString(tag)) {\r\n\t\t\tthrow new Error(\"selector in m(selector, attrs, children) should \" +\r\n\t\t\t\t\"be a string\")\r\n\t\t}\r\n\r\n\t\tvar hasAttrs = pairs != null && isObject(pairs) &&\r\n\t\t\t!(\"tag\" in pairs || \"view\" in pairs || \"subtree\" in pairs)\r\n\r\n\t\tvar attrs = hasAttrs ? pairs : {}\r\n\t\tvar cell = {\r\n\t\t\ttag: \"div\",\r\n\t\t\tattrs: {},\r\n\t\t\tchildren: getVirtualChildren(args, hasAttrs)\r\n\t\t}\r\n\r\n\t\tassignAttrs(cell.attrs, attrs, parseTagAttrs(cell, tag))\r\n\t\treturn cell\r\n\t}\r\n\r\n\tfunction forEach(list, f) {\r\n\t\tfor (var i = 0; i < list.length && !f(list[i], i++);) {\r\n\t\t\t// function called in condition\r\n\t\t}\r\n\t}\r\n\r\n\tfunction forKeys(list, f) {\r\n\t\tforEach(list, function (attrs, i) {\r\n\t\t\treturn (attrs = attrs && attrs.attrs) &&\r\n\t\t\t\tattrs.key != null &&\r\n\t\t\t\tf(attrs, i)\r\n\t\t})\r\n\t}\r\n\t// This function was causing deopts in Chrome.\r\n\tfunction dataToString(data) {\r\n\t\t// data.toString() might throw or return null if data is the return\r\n\t\t// value of Console.log in some versions of Firefox (behavior depends on\r\n\t\t// version)\r\n\t\ttry {\r\n\t\t\tif (data != null && data.toString() != null) return data\r\n\t\t} catch (e) {\r\n\t\t\t// silently ignore errors\r\n\t\t}\r\n\t\treturn \"\"\r\n\t}\r\n\r\n\t// This function was causing deopts in Chrome.\r\n\tfunction injectTextNode(parentElement, first, index, data) {\r\n\t\ttry {\r\n\t\t\tinsertNode(parentElement, first, index)\r\n\t\t\tfirst.nodeValue = data\r\n\t\t} catch (e) {\r\n\t\t\t// IE erroneously throws error when appending an empty text node\r\n\t\t\t// after a null\r\n\t\t}\r\n\t}\r\n\r\n\tfunction flatten(list) {\r\n\t\t// recursively flatten array\r\n\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\tif (isArray(list[i])) {\r\n\t\t\t\tlist = list.concat.apply([], list)\r\n\t\t\t\t// check current index again and flatten until there are no more\r\n\t\t\t\t// nested arrays at that index\r\n\t\t\t\ti--\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn list\r\n\t}\r\n\r\n\tfunction insertNode(parentElement, node, index) {\r\n\t\tparentElement.insertBefore(node,\r\n\t\t\tparentElement.childNodes[index] || null)\r\n\t}\r\n\r\n\tvar DELETION = 1\r\n\tvar INSERTION = 2\r\n\tvar MOVE = 3\r\n\r\n\tfunction handleKeysDiffer(data, existing, cached, parentElement) {\r\n\t\tforKeys(data, function (key, i) {\r\n\t\t\texisting[key = key.key] = existing[key] ? {\r\n\t\t\t\taction: MOVE,\r\n\t\t\t\tindex: i,\r\n\t\t\t\tfrom: existing[key].index,\r\n\t\t\t\telement: cached.nodes[existing[key].index] ||\r\n\t\t\t\t\t$document.createElement(\"div\")\r\n\t\t\t} : {action: INSERTION, index: i}\r\n\t\t})\r\n\r\n\t\tvar actions = []\r\n\t\tfor (var prop in existing) {\r\n\t\t\tif (hasOwn.call(existing, prop)) {\r\n\t\t\t\tactions.push(existing[prop])\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar changes = actions.sort(sortChanges)\r\n\t\tvar newCached = new Array(cached.length)\r\n\r\n\t\tnewCached.nodes = cached.nodes.slice()\r\n\r\n\t\tforEach(changes, function (change) {\r\n\t\t\tvar index = change.index\r\n\t\t\tif (change.action === DELETION) {\r\n\t\t\t\tclear(cached[index].nodes, cached[index])\r\n\t\t\t\tnewCached.splice(index, 1)\r\n\t\t\t}\r\n\t\t\tif (change.action === INSERTION) {\r\n\t\t\t\tvar dummy = $document.createElement(\"div\")\r\n\t\t\t\tdummy.key = data[index].attrs.key\r\n\t\t\t\tinsertNode(parentElement, dummy, index)\r\n\t\t\t\tnewCached.splice(index, 0, {\r\n\t\t\t\t\tattrs: {key: data[index].attrs.key},\r\n\t\t\t\t\tnodes: [dummy]\r\n\t\t\t\t})\r\n\t\t\t\tnewCached.nodes[index] = dummy\r\n\t\t\t}\r\n\r\n\t\t\tif (change.action === MOVE) {\r\n\t\t\t\tvar changeElement = change.element\r\n\t\t\t\tvar maybeChanged = parentElement.childNodes[index]\r\n\t\t\t\tif (maybeChanged !== changeElement && changeElement !== null) {\r\n\t\t\t\t\tparentElement.insertBefore(changeElement,\r\n\t\t\t\t\t\tmaybeChanged || null)\r\n\t\t\t\t}\r\n\t\t\t\tnewCached[index] = cached[change.from]\r\n\t\t\t\tnewCached.nodes[index] = changeElement\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn newCached\r\n\t}\r\n\r\n\tfunction diffKeys(data, cached, existing, parentElement) {\r\n\t\tvar keysDiffer = data.length !== cached.length\r\n\r\n\t\tif (!keysDiffer) {\r\n\t\t\tforKeys(data, function (attrs, i) {\r\n\t\t\t\tvar cachedCell = cached[i]\r\n\t\t\t\treturn keysDiffer = cachedCell &&\r\n\t\t\t\t\tcachedCell.attrs &&\r\n\t\t\t\t\tcachedCell.attrs.key !== attrs.key\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (keysDiffer) {\r\n\t\t\treturn handleKeysDiffer(data, existing, cached, parentElement)\r\n\t\t} else {\r\n\t\t\treturn cached\r\n\t\t}\r\n\t}\r\n\r\n\tfunction diffArray(data, cached, nodes) {\r\n\t\t// diff the array itself\r\n\r\n\t\t// update the list of DOM nodes by collecting the nodes from each item\r\n\t\tforEach(data, function (_, i) {\r\n\t\t\tif (cached[i] != null) nodes.push.apply(nodes, cached[i].nodes)\r\n\t\t})\r\n\t\t// remove items from the end of the array if the new array is shorter\r\n\t\t// than the old one. if errors ever happen here, the issue is most\r\n\t\t// likely a bug in the construction of the `cached` data structure\r\n\t\t// somewhere earlier in the program\r\n\t\tforEach(cached.nodes, function (node, i) {\r\n\t\t\tif (node.parentNode != null && nodes.indexOf(node) < 0) {\r\n\t\t\t\tclear([node], [cached[i]])\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tif (data.length < cached.length) cached.length = data.length\r\n\t\tcached.nodes = nodes\r\n\t}\r\n\r\n\tfunction buildArrayKeys(data) {\r\n\t\tvar guid = 0\r\n\t\tforKeys(data, function () {\r\n\t\t\tforEach(data, function (attrs) {\r\n\t\t\t\tif ((attrs = attrs && attrs.attrs) && attrs.key == null) {\r\n\t\t\t\t\tattrs.key = \"__mithril__\" + guid++\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn 1\r\n\t\t})\r\n\t}\r\n\r\n\tfunction isDifferentEnough(data, cached, dataAttrKeys) {\r\n\t\tif (data.tag !== cached.tag) return true\r\n\r\n\t\tif (dataAttrKeys.sort().join() !==\r\n\t\t\t\tObject.keys(cached.attrs).sort().join()) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tif (data.attrs.id !== cached.attrs.id) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tif (data.attrs.key !== cached.attrs.key) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tif (m.redraw.strategy() === \"all\") {\r\n\t\t\treturn !cached.configContext || cached.configContext.retain !== true\r\n\t\t}\r\n\r\n\t\tif (m.redraw.strategy() === \"diff\") {\r\n\t\t\treturn cached.configContext && cached.configContext.retain === false\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\tfunction maybeRecreateObject(data, cached, dataAttrKeys) {\r\n\t\t// if an element is different enough from the one in cache, recreate it\r\n\t\tif (isDifferentEnough(data, cached, dataAttrKeys)) {\r\n\t\t\tif (cached.nodes.length) clear(cached.nodes)\r\n\r\n\t\t\tif (cached.configContext &&\r\n\t\t\t\t\tisFunction(cached.configContext.onunload)) {\r\n\t\t\t\tcached.configContext.onunload()\r\n\t\t\t}\r\n\r\n\t\t\tif (cached.controllers) {\r\n\t\t\t\tforEach(cached.controllers, function (controller) {\r\n\t\t\t\t\tif (controller.onunload) {\r\n\t\t\t\t\t\tcontroller.onunload({preventDefault: noop})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getObjectNamespace(data, namespace) {\r\n\t\tif (data.attrs.xmlns) return data.attrs.xmlns\r\n\t\tif (data.tag === \"svg\") return \"http://www.w3.org/2000/svg\"\r\n\t\tif (data.tag === \"math\") return \"http://www.w3.org/1998/Math/MathML\"\r\n\t\treturn namespace\r\n\t}\r\n\r\n\tvar pendingRequests = 0\r\n\tm.startComputation = function () { pendingRequests++ }\r\n\tm.endComputation = function () {\r\n\t\tif (pendingRequests > 1) {\r\n\t\t\tpendingRequests--\r\n\t\t} else {\r\n\t\t\tpendingRequests = 0\r\n\t\t\tm.redraw()\r\n\t\t}\r\n\t}\r\n\r\n\tfunction unloadCachedControllers(cached, views, controllers) {\r\n\t\tif (controllers.length) {\r\n\t\t\tcached.views = views\r\n\t\t\tcached.controllers = controllers\r\n\t\t\tforEach(controllers, function (controller) {\r\n\t\t\t\tif (controller.onunload && controller.onunload.$old) {\r\n\t\t\t\t\tcontroller.onunload = controller.onunload.$old\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (pendingRequests && controller.onunload) {\r\n\t\t\t\t\tvar onunload = controller.onunload\r\n\t\t\t\t\tcontroller.onunload = noop\r\n\t\t\t\t\tcontroller.onunload.$old = onunload\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction scheduleConfigsToBeCalled(configs, data, node, isNew, cached) {\r\n\t\t// schedule configs to be called. They are called after `build` finishes\r\n\t\t// running\r\n\t\tif (isFunction(data.attrs.config)) {\r\n\t\t\tvar context = cached.configContext = cached.configContext || {}\r\n\r\n\t\t\t// bind\r\n\t\t\tconfigs.push(function () {\r\n\t\t\t\treturn data.attrs.config.call(data, node, !isNew, context,\r\n\t\t\t\t\tcached)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction buildUpdatedNode(\r\n\t\tcached,\r\n\t\tdata,\r\n\t\teditable,\r\n\t\thasKeys,\r\n\t\tnamespace,\r\n\t\tviews,\r\n\t\tconfigs,\r\n\t\tcontrollers\r\n\t) {\r\n\t\tvar node = cached.nodes[0]\r\n\r\n\t\tif (hasKeys) {\r\n\t\t\tsetAttributes(node, data.tag, data.attrs, cached.attrs, namespace)\r\n\t\t}\r\n\r\n\t\tcached.children = build(\r\n\t\t\tnode,\r\n\t\t\tdata.tag,\r\n\t\t\tundefined,\r\n\t\t\tundefined,\r\n\t\t\tdata.children,\r\n\t\t\tcached.children,\r\n\t\t\tfalse,\r\n\t\t\t0,\r\n\t\t\tdata.attrs.contenteditable ? node : editable,\r\n\t\t\tnamespace,\r\n\t\t\tconfigs\r\n\t\t)\r\n\r\n\t\tcached.nodes.intact = true\r\n\r\n\t\tif (controllers.length) {\r\n\t\t\tcached.views = views\r\n\t\t\tcached.controllers = controllers\r\n\t\t}\r\n\r\n\t\treturn node\r\n\t}\r\n\r\n\tfunction handleNonexistentNodes(data, parentElement, index) {\r\n\t\tvar nodes\r\n\t\tif (data.$trusted) {\r\n\t\t\tnodes = injectHTML(parentElement, index, data)\r\n\t\t} else {\r\n\t\t\tnodes = [$document.createTextNode(data)]\r\n\t\t\tif (!(parentElement.nodeName in voidElements)) {\r\n\t\t\t\tinsertNode(parentElement, nodes[0], index)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar cached\r\n\r\n\t\tif (typeof data === \"string\" ||\r\n\t\t\t\ttypeof data === \"number\" ||\r\n\t\t\t\ttypeof data === \"boolean\") {\r\n\t\t\tcached = new data.constructor(data)\r\n\t\t} else {\r\n\t\t\tcached = data\r\n\t\t}\r\n\r\n\t\tcached.nodes = nodes\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction reattachNodes(\r\n\t\tdata,\r\n\t\tcached,\r\n\t\tparentElement,\r\n\t\teditable,\r\n\t\tindex,\r\n\t\tparentTag\r\n\t) {\r\n\t\tvar nodes = cached.nodes\r\n\t\tif (!editable || editable !== $document.activeElement) {\r\n\t\t\tif (data.$trusted) {\r\n\t\t\t\tclear(nodes, cached)\r\n\t\t\t\tnodes = injectHTML(parentElement, index, data)\r\n\t\t\t} else if (parentTag === \"textarea\") {\r\n\t\t\t\t// <textarea> uses `value` instead of `nodeValue`.\r\n\t\t\t\tparentElement.value = data\r\n\t\t\t} else if (editable) {\r\n\t\t\t\t// contenteditable nodes use `innerHTML` instead of `nodeValue`.\r\n\t\t\t\teditable.innerHTML = data\r\n\t\t\t} else {\r\n\t\t\t\t// was a trusted string\r\n\t\t\t\tif (nodes[0].nodeType === 1 || nodes.length > 1 ||\r\n\t\t\t\t\t\t(nodes[0].nodeValue.trim &&\r\n\t\t\t\t\t\t\t!nodes[0].nodeValue.trim())) {\r\n\t\t\t\t\tclear(cached.nodes, cached)\r\n\t\t\t\t\tnodes = [$document.createTextNode(data)]\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinjectTextNode(parentElement, nodes[0], index, data)\r\n\t\t\t}\r\n\t\t}\r\n\t\tcached = new data.constructor(data)\r\n\t\tcached.nodes = nodes\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction handleTextNode(\r\n\t\tcached,\r\n\t\tdata,\r\n\t\tindex,\r\n\t\tparentElement,\r\n\t\tshouldReattach,\r\n\t\teditable,\r\n\t\tparentTag\r\n\t) {\r\n\t\tif (!cached.nodes.length) {\r\n\t\t\treturn handleNonexistentNodes(data, parentElement, index)\r\n\t\t} else if (cached.valueOf() !== data.valueOf() || shouldReattach) {\r\n\t\t\treturn reattachNodes(data, cached, parentElement, editable, index,\r\n\t\t\t\tparentTag)\r\n\t\t} else {\r\n\t\t\treturn (cached.nodes.intact = true, cached)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getSubArrayCount(item) {\r\n\t\tif (item.$trusted) {\r\n\t\t\t// fix offset of next element if item was a trusted string w/ more\r\n\t\t\t// than one html element\r\n\t\t\t// the first clause in the regexp matches elements\r\n\t\t\t// the second clause (after the pipe) matches text nodes\r\n\t\t\tvar match = item.match(/<[^\\/]|\\>\\s*[^<]/g)\r\n\t\t\tif (match != null) return match.length\r\n\t\t} else if (isArray(item)) {\r\n\t\t\treturn item.length\r\n\t\t}\r\n\t\treturn 1\r\n\t}\r\n\r\n\tfunction buildArray(\r\n\t\tdata,\r\n\t\tcached,\r\n\t\tparentElement,\r\n\t\tindex,\r\n\t\tparentTag,\r\n\t\tshouldReattach,\r\n\t\teditable,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\tdata = flatten(data)\r\n\t\tvar nodes = []\r\n\t\tvar intact = cached.length === data.length\r\n\t\tvar subArrayCount = 0\r\n\r\n\t\t// keys algorithm: sort elements without recreating them if keys are\r\n\t\t// present\r\n\t\t//\r\n\t\t// 1) create a map of all existing keys, and mark all for deletion\r\n\t\t// 2) add new keys to map and mark them for addition\r\n\t\t// 3) if key exists in new list, change action from deletion to a move\r\n\t\t// 4) for each key, handle its corresponding action as marked in\r\n\t\t//    previous steps\r\n\r\n\t\tvar existing = {}\r\n\t\tvar shouldMaintainIdentities = false\r\n\r\n\t\tforKeys(cached, function (attrs, i) {\r\n\t\t\tshouldMaintainIdentities = true\r\n\t\t\texisting[cached[i].attrs.key] = {action: DELETION, index: i}\r\n\t\t})\r\n\r\n\t\tbuildArrayKeys(data)\r\n\t\tif (shouldMaintainIdentities) {\r\n\t\t\tcached = diffKeys(data, cached, existing, parentElement)\r\n\t\t}\r\n\t\t// end key algorithm\r\n\r\n\t\tvar cacheCount = 0\r\n\t\t// faster explicitly written\r\n\t\tfor (var i = 0, len = data.length; i < len; i++) {\r\n\t\t\t// diff each item in the array\r\n\t\t\tvar item = build(\r\n\t\t\t\tparentElement,\r\n\t\t\t\tparentTag,\r\n\t\t\t\tcached,\r\n\t\t\t\tindex,\r\n\t\t\t\tdata[i],\r\n\t\t\t\tcached[cacheCount],\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\tindex + subArrayCount || subArrayCount,\r\n\t\t\t\teditable,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\r\n\t\t\tif (item !== undefined) {\r\n\t\t\t\tintact = intact && item.nodes.intact\r\n\t\t\t\tsubArrayCount += getSubArrayCount(item)\r\n\t\t\t\tcached[cacheCount++] = item\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!intact) diffArray(data, cached, nodes)\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction makeCache(data, cached, index, parentIndex, parentCache) {\r\n\t\tif (cached != null) {\r\n\t\t\tif (type.call(cached) === type.call(data)) return cached\r\n\r\n\t\t\tif (parentCache && parentCache.nodes) {\r\n\t\t\t\tvar offset = index - parentIndex\r\n\t\t\t\tvar end = offset + (isArray(data) ? data : cached.nodes).length\r\n\t\t\t\tclear(\r\n\t\t\t\t\tparentCache.nodes.slice(offset, end),\r\n\t\t\t\t\tparentCache.slice(offset, end))\r\n\t\t\t} else if (cached.nodes) {\r\n\t\t\t\tclear(cached.nodes, cached)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcached = new data.constructor()\r\n\t\t// if constructor creates a virtual dom element, use a blank object as\r\n\t\t// the base cached node instead of copying the virtual el (#277)\r\n\t\tif (cached.tag) cached = {}\r\n\t\tcached.nodes = []\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction constructNode(data, namespace) {\r\n\t\tif (data.attrs.is) {\r\n\t\t\tif (namespace == null) {\r\n\t\t\t\treturn $document.createElement(data.tag, data.attrs.is)\r\n\t\t\t} else {\r\n\t\t\t\treturn $document.createElementNS(namespace, data.tag,\r\n\t\t\t\t\tdata.attrs.is)\r\n\t\t\t}\r\n\t\t} else if (namespace == null) {\r\n\t\t\treturn $document.createElement(data.tag)\r\n\t\t} else {\r\n\t\t\treturn $document.createElementNS(namespace, data.tag)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction constructAttrs(data, node, namespace, hasKeys) {\r\n\t\tif (hasKeys) {\r\n\t\t\treturn setAttributes(node, data.tag, data.attrs, {}, namespace)\r\n\t\t} else {\r\n\t\t\treturn data.attrs\r\n\t\t}\r\n\t}\r\n\r\n\tfunction constructChildren(\r\n\t\tdata,\r\n\t\tnode,\r\n\t\tcached,\r\n\t\teditable,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\tif (data.children != null && data.children.length > 0) {\r\n\t\t\treturn build(\r\n\t\t\t\tnode,\r\n\t\t\t\tdata.tag,\r\n\t\t\t\tundefined,\r\n\t\t\t\tundefined,\r\n\t\t\t\tdata.children,\r\n\t\t\t\tcached.children,\r\n\t\t\t\ttrue,\r\n\t\t\t\t0,\r\n\t\t\t\tdata.attrs.contenteditable ? node : editable,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\t\t} else {\r\n\t\t\treturn data.children\r\n\t\t}\r\n\t}\r\n\r\n\tfunction reconstructCached(\r\n\t\tdata,\r\n\t\tattrs,\r\n\t\tchildren,\r\n\t\tnode,\r\n\t\tnamespace,\r\n\t\tviews,\r\n\t\tcontrollers\r\n\t) {\r\n\t\tvar cached = {\r\n\t\t\ttag: data.tag,\r\n\t\t\tattrs: attrs,\r\n\t\t\tchildren: children,\r\n\t\t\tnodes: [node]\r\n\t\t}\r\n\r\n\t\tunloadCachedControllers(cached, views, controllers)\r\n\r\n\t\tif (cached.children && !cached.children.nodes) {\r\n\t\t\tcached.children.nodes = []\r\n\t\t}\r\n\r\n\t\t// edge case: setting value on <select> doesn't work before children\r\n\t\t// exist, so set it again after children have been created\r\n\t\tif (data.tag === \"select\" && \"value\" in data.attrs) {\r\n\t\t\tsetAttributes(node, data.tag, {value: data.attrs.value}, {},\r\n\t\t\t\tnamespace)\r\n\t\t}\r\n\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction getController(views, view, cachedControllers, controller) {\r\n\t\tvar controllerIndex\r\n\r\n\t\tif (m.redraw.strategy() === \"diff\" && views) {\r\n\t\t\tcontrollerIndex = views.indexOf(view)\r\n\t\t} else {\r\n\t\t\tcontrollerIndex = -1\r\n\t\t}\r\n\r\n\t\tif (controllerIndex > -1) {\r\n\t\t\treturn cachedControllers[controllerIndex]\r\n\t\t} else if (isFunction(controller)) {\r\n\t\t\treturn new controller()\r\n\t\t} else {\r\n\t\t\treturn {}\r\n\t\t}\r\n\t}\r\n\r\n\tvar unloaders = []\r\n\r\n\tfunction updateLists(views, controllers, view, controller) {\r\n\t\tif (controller.onunload != null &&\r\n\t\t\t\tunloaders.map(function (u) { return u.handler })\r\n\t\t\t\t\t.indexOf(controller.onunload) < 0) {\r\n\t\t\tunloaders.push({\r\n\t\t\t\tcontroller: controller,\r\n\t\t\t\thandler: controller.onunload\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tviews.push(view)\r\n\t\tcontrollers.push(controller)\r\n\t}\r\n\r\n\tvar forcing = false\r\n\tfunction checkView(\r\n\t\tdata,\r\n\t\tview,\r\n\t\tcached,\r\n\t\tcachedControllers,\r\n\t\tcontrollers,\r\n\t\tviews\r\n\t) {\r\n\t\tvar controller = getController(\r\n\t\t\tcached.views,\r\n\t\t\tview,\r\n\t\t\tcachedControllers,\r\n\t\t\tdata.controller)\r\n\r\n\t\tvar key = data && data.attrs && data.attrs.key\r\n\r\n\t\tif (pendingRequests === 0 ||\r\n\t\t\t\tforcing ||\r\n\t\t\t\tcachedControllers &&\r\n\t\t\t\t\tcachedControllers.indexOf(controller) > -1) {\r\n\t\t\tdata = data.view(controller)\r\n\t\t} else {\r\n\t\t\tdata = {tag: \"placeholder\"}\r\n\t\t}\r\n\r\n\t\tif (data.subtree === \"retain\") return data\r\n\t\tdata.attrs = data.attrs || {}\r\n\t\tdata.attrs.key = key\r\n\t\tupdateLists(views, controllers, view, controller)\r\n\t\treturn data\r\n\t}\r\n\r\n\tfunction markViews(data, cached, views, controllers) {\r\n\t\tvar cachedControllers = cached && cached.controllers\r\n\r\n\t\twhile (data.view != null) {\r\n\t\t\tdata = checkView(\r\n\t\t\t\tdata,\r\n\t\t\t\tdata.view.$original || data.view,\r\n\t\t\t\tcached,\r\n\t\t\t\tcachedControllers,\r\n\t\t\t\tcontrollers,\r\n\t\t\t\tviews)\r\n\t\t}\r\n\r\n\t\treturn data\r\n\t}\r\n\r\n\tfunction buildObject( // eslint-disable-line max-statements\r\n\t\tdata,\r\n\t\tcached,\r\n\t\teditable,\r\n\t\tparentElement,\r\n\t\tindex,\r\n\t\tshouldReattach,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\tvar views = []\r\n\t\tvar controllers = []\r\n\r\n\t\tdata = markViews(data, cached, views, controllers)\r\n\r\n\t\tif (data.subtree === \"retain\") return cached\r\n\r\n\t\tif (!data.tag && controllers.length) {\r\n\t\t\tthrow new Error(\"Component template must return a virtual \" +\r\n\t\t\t\t\"element, not an array, string, etc.\")\r\n\t\t}\r\n\r\n\t\tdata.attrs = data.attrs || {}\r\n\t\tcached.attrs = cached.attrs || {}\r\n\r\n\t\tvar dataAttrKeys = Object.keys(data.attrs)\r\n\t\tvar hasKeys = dataAttrKeys.length > (\"key\" in data.attrs ? 1 : 0)\r\n\r\n\t\tmaybeRecreateObject(data, cached, dataAttrKeys)\r\n\r\n\t\tif (!isString(data.tag)) return\r\n\r\n\t\tvar isNew = cached.nodes.length === 0\r\n\r\n\t\tnamespace = getObjectNamespace(data, namespace)\r\n\r\n\t\tvar node\r\n\t\tif (isNew) {\r\n\t\t\tnode = constructNode(data, namespace)\r\n\t\t\t// set attributes first, then create children\r\n\t\t\tvar attrs = constructAttrs(data, node, namespace, hasKeys)\r\n\r\n\t\t\t// add the node to its parent before attaching children to it\r\n\t\t\tinsertNode(parentElement, node, index)\r\n\r\n\t\t\tvar children = constructChildren(data, node, cached, editable,\r\n\t\t\t\tnamespace, configs)\r\n\r\n\t\t\tcached = reconstructCached(\r\n\t\t\t\tdata,\r\n\t\t\t\tattrs,\r\n\t\t\t\tchildren,\r\n\t\t\t\tnode,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tviews,\r\n\t\t\t\tcontrollers)\r\n\t\t} else {\r\n\t\t\tnode = buildUpdatedNode(\r\n\t\t\t\tcached,\r\n\t\t\t\tdata,\r\n\t\t\t\teditable,\r\n\t\t\t\thasKeys,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tviews,\r\n\t\t\t\tconfigs,\r\n\t\t\t\tcontrollers)\r\n\t\t}\r\n\r\n\t\tif (!isNew && shouldReattach === true && node != null) {\r\n\t\t\tinsertNode(parentElement, node, index)\r\n\t\t}\r\n\r\n\t\t// The configs are called after `build` finishes running\r\n\t\tscheduleConfigsToBeCalled(configs, data, node, isNew, cached)\r\n\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction build(\r\n\t\tparentElement,\r\n\t\tparentTag,\r\n\t\tparentCache,\r\n\t\tparentIndex,\r\n\t\tdata,\r\n\t\tcached,\r\n\t\tshouldReattach,\r\n\t\tindex,\r\n\t\teditable,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\t/*\r\n\t\t * `build` is a recursive function that manages creation/diffing/removal\r\n\t\t * of DOM elements based on comparison between `data` and `cached` the\r\n\t\t * diff algorithm can be summarized as this:\r\n\t\t *\r\n\t\t * 1 - compare `data` and `cached`\r\n\t\t * 2 - if they are different, copy `data` to `cached` and update the DOM\r\n\t\t *     based on what the difference is\r\n\t\t * 3 - recursively apply this algorithm for every array and for the\r\n\t\t *     children of every virtual element\r\n\t\t *\r\n\t\t * The `cached` data structure is essentially the same as the previous\r\n\t\t * redraw's `data` data structure, with a few additions:\r\n\t\t * - `cached` always has a property called `nodes`, which is a list of\r\n\t\t *    DOM elements that correspond to the data represented by the\r\n\t\t *    respective virtual element\r\n\t\t * - in order to support attaching `nodes` as a property of `cached`,\r\n\t\t *    `cached` is *always* a non-primitive object, i.e. if the data was\r\n\t\t *    a string, then cached is a String instance. If data was `null` or\r\n\t\t *    `undefined`, cached is `new String(\"\")`\r\n\t\t * - `cached also has a `configContext` property, which is the state\r\n\t\t *    storage object exposed by config(element, isInitialized, context)\r\n\t\t * - when `cached` is an Object, it represents a virtual element; when\r\n\t\t *    it's an Array, it represents a list of elements; when it's a\r\n\t\t *    String, Number or Boolean, it represents a text node\r\n\t\t *\r\n\t\t * `parentElement` is a DOM element used for W3C DOM API calls\r\n\t\t * `parentTag` is only used for handling a corner case for textarea\r\n\t\t * values\r\n\t\t * `parentCache` is used to remove nodes in some multi-node cases\r\n\t\t * `parentIndex` and `index` are used to figure out the offset of nodes.\r\n\t\t * They're artifacts from before arrays started being flattened and are\r\n\t\t * likely refactorable\r\n\t\t * `data` and `cached` are, respectively, the new and old nodes being\r\n\t\t * diffed\r\n\t\t * `shouldReattach` is a flag indicating whether a parent node was\r\n\t\t * recreated (if so, and if this node is reused, then this node must\r\n\t\t * reattach itself to the new parent)\r\n\t\t * `editable` is a flag that indicates whether an ancestor is\r\n\t\t * contenteditable\r\n\t\t * `namespace` indicates the closest HTML namespace as it cascades down\r\n\t\t * from an ancestor\r\n\t\t * `configs` is a list of config functions to run after the topmost\r\n\t\t * `build` call finishes running\r\n\t\t *\r\n\t\t * there's logic that relies on the assumption that null and undefined\r\n\t\t * data are equivalent to empty strings\r\n\t\t * - this prevents lifecycle surprises from procedural helpers that mix\r\n\t\t *   implicit and explicit return statements (e.g.\r\n\t\t *   function foo() {if (cond) return m(\"div\")}\r\n\t\t * - it simplifies diffing code\r\n\t\t */\r\n\t\tdata = dataToString(data)\r\n\t\tif (data.subtree === \"retain\") return cached\r\n\t\tcached = makeCache(data, cached, index, parentIndex, parentCache)\r\n\r\n\t\tif (isArray(data)) {\r\n\t\t\treturn buildArray(\r\n\t\t\t\tdata,\r\n\t\t\t\tcached,\r\n\t\t\t\tparentElement,\r\n\t\t\t\tindex,\r\n\t\t\t\tparentTag,\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\teditable,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\t\t} else if (data != null && isObject(data)) {\r\n\t\t\treturn buildObject(\r\n\t\t\t\tdata,\r\n\t\t\t\tcached,\r\n\t\t\t\teditable,\r\n\t\t\t\tparentElement,\r\n\t\t\t\tindex,\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\t\t} else if (!isFunction(data)) {\r\n\t\t\treturn handleTextNode(\r\n\t\t\t\tcached,\r\n\t\t\t\tdata,\r\n\t\t\t\tindex,\r\n\t\t\t\tparentElement,\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\teditable,\r\n\t\t\t\tparentTag)\r\n\t\t} else {\r\n\t\t\treturn cached\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sortChanges(a, b) {\r\n\t\treturn a.action - b.action || a.index - b.index\r\n\t}\r\n\r\n\tfunction copyStyleAttrs(node, dataAttr, cachedAttr) {\r\n\t\tfor (var rule in dataAttr) {\r\n\t\t\tif (hasOwn.call(dataAttr, rule)) {\r\n\t\t\t\tif (cachedAttr == null || cachedAttr[rule] !== dataAttr[rule]) {\r\n\t\t\t\t\tnode.style[rule] = dataAttr[rule]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (rule in cachedAttr) {\r\n\t\t\tif (hasOwn.call(cachedAttr, rule)) {\r\n\t\t\t\tif (!hasOwn.call(dataAttr, rule)) node.style[rule] = \"\"\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar shouldUseSetAttribute = {\r\n\t\tlist: 1,\r\n\t\tstyle: 1,\r\n\t\tform: 1,\r\n\t\ttype: 1,\r\n\t\twidth: 1,\r\n\t\theight: 1\r\n\t}\r\n\r\n\tfunction setSingleAttr(\r\n\t\tnode,\r\n\t\tattrName,\r\n\t\tdataAttr,\r\n\t\tcachedAttr,\r\n\t\ttag,\r\n\t\tnamespace\r\n\t) {\r\n\t\tif (attrName === \"config\" || attrName === \"key\") {\r\n\t\t\t// `config` isn't a real attribute, so ignore it\r\n\t\t\treturn true\r\n\t\t} else if (isFunction(dataAttr) && attrName.slice(0, 2) === \"on\") {\r\n\t\t\t// hook event handlers to the auto-redrawing system\r\n\t\t\tnode[attrName] = autoredraw(dataAttr, node)\r\n\t\t} else if (attrName === \"style\" && dataAttr != null &&\r\n\t\t\t\tisObject(dataAttr)) {\r\n\t\t\t// handle `style: {...}`\r\n\t\t\tcopyStyleAttrs(node, dataAttr, cachedAttr)\r\n\t\t} else if (namespace != null) {\r\n\t\t\t// handle SVG\r\n\t\t\tif (attrName === \"href\") {\r\n\t\t\t\tnode.setAttributeNS(\"http://www.w3.org/1999/xlink\",\r\n\t\t\t\t\t\"href\", dataAttr)\r\n\t\t\t} else {\r\n\t\t\t\tnode.setAttribute(\r\n\t\t\t\t\tattrName === \"className\" ? \"class\" : attrName,\r\n\t\t\t\t\tdataAttr)\r\n\t\t\t}\r\n\t\t} else if (attrName in node && !shouldUseSetAttribute[attrName]) {\r\n\t\t\t// handle cases that are properties (but ignore cases where we\r\n\t\t\t// should use setAttribute instead)\r\n\t\t\t//\r\n\t\t\t// - list and form are typically used as strings, but are DOM\r\n\t\t\t//   element references in js\r\n\t\t\t//\r\n\t\t\t// - when using CSS selectors (e.g. `m(\"[style='']\")`), style is\r\n\t\t\t//   used as a string, but it's an object in js\r\n\t\t\t//\r\n\t\t\t// #348 don't set the value if not needed - otherwise, cursor\r\n\t\t\t// placement breaks in Chrome\r\n\t\t\ttry {\r\n\t\t\t\tif (tag !== \"input\" || node[attrName] !== dataAttr) {\r\n\t\t\t\t\tnode[attrName] = dataAttr\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tnode.setAttribute(attrName, dataAttr)\r\n\t\t\t}\r\n\t\t}\r\n\t\telse node.setAttribute(attrName, dataAttr)\r\n\t}\r\n\r\n\tfunction trySetAttr(\r\n\t\tnode,\r\n\t\tattrName,\r\n\t\tdataAttr,\r\n\t\tcachedAttr,\r\n\t\tcachedAttrs,\r\n\t\ttag,\r\n\t\tnamespace\r\n\t) {\r\n\t\tif (!(attrName in cachedAttrs) || (cachedAttr !== dataAttr) || ($document.activeElement === node)) {\r\n\t\t\tcachedAttrs[attrName] = dataAttr\r\n\t\t\ttry {\r\n\t\t\t\treturn setSingleAttr(\r\n\t\t\t\t\tnode,\r\n\t\t\t\t\tattrName,\r\n\t\t\t\t\tdataAttr,\r\n\t\t\t\t\tcachedAttr,\r\n\t\t\t\t\ttag,\r\n\t\t\t\t\tnamespace)\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// swallow IE's invalid argument errors to mimic HTML's\r\n\t\t\t\t// fallback-to-doing-nothing-on-invalid-attributes behavior\r\n\t\t\t\tif (e.message.indexOf(\"Invalid argument\") < 0) throw e\r\n\t\t\t}\r\n\t\t} else if (attrName === \"value\" && tag === \"input\" &&\r\n\t\t\t\tnode.value !== dataAttr) {\r\n\t\t\t// #348 dataAttr may not be a string, so use loose comparison\r\n\t\t\tnode.value = dataAttr\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setAttributes(node, tag, dataAttrs, cachedAttrs, namespace) {\r\n\t\tfor (var attrName in dataAttrs) {\r\n\t\t\tif (hasOwn.call(dataAttrs, attrName)) {\r\n\t\t\t\tif (trySetAttr(\r\n\t\t\t\t\t\tnode,\r\n\t\t\t\t\t\tattrName,\r\n\t\t\t\t\t\tdataAttrs[attrName],\r\n\t\t\t\t\t\tcachedAttrs[attrName],\r\n\t\t\t\t\t\tcachedAttrs,\r\n\t\t\t\t\t\ttag,\r\n\t\t\t\t\t\tnamespace)) {\r\n\t\t\t\t\tcontinue\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn cachedAttrs\r\n\t}\r\n\r\n\tfunction clear(nodes, cached) {\r\n\t\tfor (var i = nodes.length - 1; i > -1; i--) {\r\n\t\t\tif (nodes[i] && nodes[i].parentNode) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tnodes[i].parentNode.removeChild(nodes[i])\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t/* eslint-disable max-len */\r\n\t\t\t\t\t// ignore if this fails due to order of events (see\r\n\t\t\t\t\t// http://stackoverflow.com/questions/21926083/failed-to-execute-removechild-on-node)\r\n\t\t\t\t\t/* eslint-enable max-len */\r\n\t\t\t\t}\r\n\t\t\t\tcached = [].concat(cached)\r\n\t\t\t\tif (cached[i]) unload(cached[i])\r\n\t\t\t}\r\n\t\t}\r\n\t\t// release memory if nodes is an array. This check should fail if nodes\r\n\t\t// is a NodeList (see loop above)\r\n\t\tif (nodes.length) {\r\n\t\t\tnodes.length = 0\r\n\t\t}\r\n\t}\r\n\r\n\tfunction unload(cached) {\r\n\t\tif (cached.configContext && isFunction(cached.configContext.onunload)) {\r\n\t\t\tcached.configContext.onunload()\r\n\t\t\tcached.configContext.onunload = null\r\n\t\t}\r\n\t\tif (cached.controllers) {\r\n\t\t\tforEach(cached.controllers, function (controller) {\r\n\t\t\t\tif (isFunction(controller.onunload)) {\r\n\t\t\t\t\tcontroller.onunload({preventDefault: noop})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (cached.children) {\r\n\t\t\tif (isArray(cached.children)) forEach(cached.children, unload)\r\n\t\t\telse if (cached.children.tag) unload(cached.children)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction appendTextFragment(parentElement, data) {\r\n\t\ttry {\r\n\t\t\tparentElement.appendChild(\r\n\t\t\t\t$document.createRange().createContextualFragment(data))\r\n\t\t} catch (e) {\r\n\t\t\tparentElement.insertAdjacentHTML(\"beforeend\", data)\r\n\t\t\treplaceScriptNodes(parentElement)\r\n\t\t}\r\n\t}\r\n\r\n\t// Replace script tags inside given DOM element with executable ones.\r\n\t// Will also check children recursively and replace any found script\r\n\t// tags in same manner.\r\n\tfunction replaceScriptNodes(node) {\r\n\t\tif (node.tagName === \"SCRIPT\") {\r\n\t\t\tnode.parentNode.replaceChild(buildExecutableNode(node), node)\r\n\t\t} else {\r\n\t\t\tvar children = node.childNodes\r\n\t\t\tif (children && children.length) {\r\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\treplaceScriptNodes(children[i])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn node\r\n\t}\r\n\r\n\t// Replace script element with one whose contents are executable.\r\n\tfunction buildExecutableNode(node){\r\n\t\tvar scriptEl = document.createElement(\"script\")\r\n\t\tvar attrs = node.attributes\r\n\r\n\t\tfor (var i = 0; i < attrs.length; i++) {\r\n\t\t\tscriptEl.setAttribute(attrs[i].name, attrs[i].value)\r\n\t\t}\r\n\r\n\t\tscriptEl.text = node.innerHTML\r\n\t\treturn scriptEl\r\n\t}\r\n\r\n\tfunction injectHTML(parentElement, index, data) {\r\n\t\tvar nextSibling = parentElement.childNodes[index]\r\n\t\tif (nextSibling) {\r\n\t\t\tvar isElement = nextSibling.nodeType !== 1\r\n\t\t\tvar placeholder = $document.createElement(\"span\")\r\n\t\t\tif (isElement) {\r\n\t\t\t\tparentElement.insertBefore(placeholder, nextSibling || null)\r\n\t\t\t\tplaceholder.insertAdjacentHTML(\"beforebegin\", data)\r\n\t\t\t\tparentElement.removeChild(placeholder)\r\n\t\t\t} else {\r\n\t\t\t\tnextSibling.insertAdjacentHTML(\"beforebegin\", data)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tappendTextFragment(parentElement, data)\r\n\t\t}\r\n\r\n\t\tvar nodes = []\r\n\r\n\t\twhile (parentElement.childNodes[index] !== nextSibling) {\r\n\t\t\tnodes.push(parentElement.childNodes[index])\r\n\t\t\tindex++\r\n\t\t}\r\n\r\n\t\treturn nodes\r\n\t}\r\n\r\n\tfunction autoredraw(callback, object) {\r\n\t\treturn function (e) {\r\n\t\t\te = e || event\r\n\t\t\tm.redraw.strategy(\"diff\")\r\n\t\t\tm.startComputation()\r\n\t\t\ttry {\r\n\t\t\t\treturn callback.call(object, e)\r\n\t\t\t} finally {\r\n\t\t\t\tendFirstComputation()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar html\r\n\tvar documentNode = {\r\n\t\tappendChild: function (node) {\r\n\t\t\tif (html === undefined) html = $document.createElement(\"html\")\r\n\t\t\tif ($document.documentElement &&\r\n\t\t\t\t\t$document.documentElement !== node) {\r\n\t\t\t\t$document.replaceChild(node, $document.documentElement)\r\n\t\t\t} else {\r\n\t\t\t\t$document.appendChild(node)\r\n\t\t\t}\r\n\r\n\t\t\tthis.childNodes = $document.childNodes\r\n\t\t},\r\n\r\n\t\tinsertBefore: function (node) {\r\n\t\t\tthis.appendChild(node)\r\n\t\t},\r\n\r\n\t\tchildNodes: []\r\n\t}\r\n\r\n\tvar nodeCache = []\r\n\tvar cellCache = {}\r\n\r\n\tm.render = function (root, cell, forceRecreation) {\r\n\t\tif (!root) {\r\n\t\t\tthrow new Error(\"Ensure the DOM element being passed to \" +\r\n\t\t\t\t\"m.route/m.mount/m.render is not undefined.\")\r\n\t\t}\r\n\t\tvar configs = []\r\n\t\tvar id = getCellCacheKey(root)\r\n\t\tvar isDocumentRoot = root === $document\r\n\t\tvar node\r\n\r\n\t\tif (isDocumentRoot || root === $document.documentElement) {\r\n\t\t\tnode = documentNode\r\n\t\t} else {\r\n\t\t\tnode = root\r\n\t\t}\r\n\r\n\t\tif (isDocumentRoot && cell.tag !== \"html\") {\r\n\t\t\tcell = {tag: \"html\", attrs: {}, children: cell}\r\n\t\t}\r\n\r\n\t\tif (cellCache[id] === undefined) clear(node.childNodes)\r\n\t\tif (forceRecreation === true) reset(root)\r\n\r\n\t\tcellCache[id] = build(\r\n\t\t\tnode,\r\n\t\t\tnull,\r\n\t\t\tundefined,\r\n\t\t\tundefined,\r\n\t\t\tcell,\r\n\t\t\tcellCache[id],\r\n\t\t\tfalse,\r\n\t\t\t0,\r\n\t\t\tnull,\r\n\t\t\tundefined,\r\n\t\t\tconfigs)\r\n\r\n\t\tforEach(configs, function (config) { config() })\r\n\t}\r\n\r\n\tfunction getCellCacheKey(element) {\r\n\t\tvar index = nodeCache.indexOf(element)\r\n\t\treturn index < 0 ? nodeCache.push(element) - 1 : index\r\n\t}\r\n\r\n\tm.trust = function (value) {\r\n\t\tvalue = new String(value) // eslint-disable-line no-new-wrappers\r\n\t\tvalue.$trusted = true\r\n\t\treturn value\r\n\t}\r\n\r\n\tfunction gettersetter(store) {\r\n\t\tfunction prop() {\r\n\t\t\tif (arguments.length) store = arguments[0]\r\n\t\t\treturn store\r\n\t\t}\r\n\r\n\t\tprop.toJSON = function () {\r\n\t\t\treturn store\r\n\t\t}\r\n\r\n\t\treturn prop\r\n\t}\r\n\r\n\tm.prop = function (store) {\r\n\t\tif ((store != null && (isObject(store) || isFunction(store)) || ((typeof Promise !== \"undefined\") && (store instanceof Promise))) &&\r\n\t\t\t\tisFunction(store.then)) {\r\n\t\t\treturn propify(store)\r\n\t\t}\r\n\r\n\t\treturn gettersetter(store)\r\n\t}\r\n\r\n\tvar roots = []\r\n\tvar components = []\r\n\tvar controllers = []\r\n\tvar lastRedrawId = null\r\n\tvar lastRedrawCallTime = 0\r\n\tvar computePreRedrawHook = null\r\n\tvar computePostRedrawHook = null\r\n\tvar topComponent\r\n\tvar FRAME_BUDGET = 16 // 60 frames per second = 1 call per 16 ms\r\n\r\n\tfunction parameterize(component, args) {\r\n\t\tfunction controller() {\r\n\t\t\t/* eslint-disable no-invalid-this */\r\n\t\t\treturn (component.controller || noop).apply(this, args) || this\r\n\t\t\t/* eslint-enable no-invalid-this */\r\n\t\t}\r\n\r\n\t\tif (component.controller) {\r\n\t\t\tcontroller.prototype = component.controller.prototype\r\n\t\t}\r\n\r\n\t\tfunction view(ctrl) {\r\n\t\t\tvar currentArgs = [ctrl].concat(args)\r\n\t\t\tfor (var i = 1; i < arguments.length; i++) {\r\n\t\t\t\tcurrentArgs.push(arguments[i])\r\n\t\t\t}\r\n\r\n\t\t\treturn component.view.apply(component, currentArgs)\r\n\t\t}\r\n\r\n\t\tview.$original = component.view\r\n\t\tvar output = {controller: controller, view: view}\r\n\t\tif (args[0] && args[0].key != null) output.attrs = {key: args[0].key}\r\n\t\treturn output\r\n\t}\r\n\r\n\tm.component = function (component) {\r\n\t\tvar args = new Array(arguments.length - 1)\r\n\r\n\t\tfor (var i = 1; i < arguments.length; i++) {\r\n\t\t\targs[i - 1] = arguments[i]\r\n\t\t}\r\n\r\n\t\treturn parameterize(component, args)\r\n\t}\r\n\r\n\tfunction checkPrevented(component, root, index, isPrevented) {\r\n\t\tif (!isPrevented) {\r\n\t\t\tm.redraw.strategy(\"all\")\r\n\t\t\tm.startComputation()\r\n\t\t\troots[index] = root\r\n\t\t\tvar currentComponent\r\n\r\n\t\t\tif (component) {\r\n\t\t\t\tcurrentComponent = topComponent = component\r\n\t\t\t} else {\r\n\t\t\t\tcurrentComponent = topComponent = component = {controller: noop}\r\n\t\t\t}\r\n\r\n\t\t\tvar controller = new (component.controller || noop)()\r\n\r\n\t\t\t// controllers may call m.mount recursively (via m.route redirects,\r\n\t\t\t// for example)\r\n\t\t\t// this conditional ensures only the last recursive m.mount call is\r\n\t\t\t// applied\r\n\t\t\tif (currentComponent === topComponent) {\r\n\t\t\t\tcontrollers[index] = controller\r\n\t\t\t\tcomponents[index] = component\r\n\t\t\t}\r\n\t\t\tendFirstComputation()\r\n\t\t\tif (component === null) {\r\n\t\t\t\tremoveRootElement(root, index)\r\n\t\t\t}\r\n\t\t\treturn controllers[index]\r\n\t\t} else if (component == null) {\r\n\t\t\tremoveRootElement(root, index)\r\n\t\t}\r\n\t}\r\n\r\n\tm.mount = m.module = function (root, component) {\r\n\t\tif (!root) {\r\n\t\t\tthrow new Error(\"Please ensure the DOM element exists before \" +\r\n\t\t\t\t\"rendering a template into it.\")\r\n\t\t}\r\n\r\n\t\tvar index = roots.indexOf(root)\r\n\t\tif (index < 0) index = roots.length\r\n\r\n\t\tvar isPrevented = false\r\n\t\tvar event = {\r\n\t\t\tpreventDefault: function () {\r\n\t\t\t\tisPrevented = true\r\n\t\t\t\tcomputePreRedrawHook = computePostRedrawHook = null\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tforEach(unloaders, function (unloader) {\r\n\t\t\tunloader.handler.call(unloader.controller, event)\r\n\t\t\tunloader.controller.onunload = null\r\n\t\t})\r\n\r\n\t\tif (isPrevented) {\r\n\t\t\tforEach(unloaders, function (unloader) {\r\n\t\t\t\tunloader.controller.onunload = unloader.handler\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tunloaders = []\r\n\t\t}\r\n\r\n\t\tif (controllers[index] && isFunction(controllers[index].onunload)) {\r\n\t\t\tcontrollers[index].onunload(event)\r\n\t\t}\r\n\r\n\t\treturn checkPrevented(component, root, index, isPrevented)\r\n\t}\r\n\r\n\tfunction removeRootElement(root, index) {\r\n\t\troots.splice(index, 1)\r\n\t\tcontrollers.splice(index, 1)\r\n\t\tcomponents.splice(index, 1)\r\n\t\treset(root)\r\n\t\tnodeCache.splice(getCellCacheKey(root), 1)\r\n\t}\r\n\r\n\tvar redrawing = false\r\n\tm.redraw = function (force) {\r\n\t\tif (redrawing) return\r\n\t\tredrawing = true\r\n\t\tif (force) forcing = true\r\n\r\n\t\ttry {\r\n\t\t\t// lastRedrawId is a positive number if a second redraw is requested\r\n\t\t\t// before the next animation frame\r\n\t\t\t// lastRedrawId is null if it's the first redraw and not an event\r\n\t\t\t// handler\r\n\t\t\tif (lastRedrawId && !force) {\r\n\t\t\t\t// when setTimeout: only reschedule redraw if time between now\r\n\t\t\t\t// and previous redraw is bigger than a frame, otherwise keep\r\n\t\t\t\t// currently scheduled timeout\r\n\t\t\t\t// when rAF: always reschedule redraw\r\n\t\t\t\tif ($requestAnimationFrame === global.requestAnimationFrame ||\r\n\t\t\t\t\t\tnew Date() - lastRedrawCallTime > FRAME_BUDGET) {\r\n\t\t\t\t\tif (lastRedrawId > 0) $cancelAnimationFrame(lastRedrawId)\r\n\t\t\t\t\tlastRedrawId = $requestAnimationFrame(redraw, FRAME_BUDGET)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tredraw()\r\n\t\t\t\tlastRedrawId = $requestAnimationFrame(function () {\r\n\t\t\t\t\tlastRedrawId = null\r\n\t\t\t\t}, FRAME_BUDGET)\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tredrawing = forcing = false\r\n\t\t}\r\n\t}\r\n\r\n\tm.redraw.strategy = m.prop()\r\n\tfunction redraw() {\r\n\t\tif (computePreRedrawHook) {\r\n\t\t\tcomputePreRedrawHook()\r\n\t\t\tcomputePreRedrawHook = null\r\n\t\t}\r\n\t\tforEach(roots, function (root, i) {\r\n\t\t\tvar component = components[i]\r\n\t\t\tif (controllers[i]) {\r\n\t\t\t\tvar args = [controllers[i]]\r\n\t\t\t\tm.render(root,\r\n\t\t\t\t\tcomponent.view ? component.view(controllers[i], args) : \"\")\r\n\t\t\t}\r\n\t\t})\r\n\t\t// after rendering within a routed context, we need to scroll back to\r\n\t\t// the top, and fetch the document title for history.pushState\r\n\t\tif (computePostRedrawHook) {\r\n\t\t\tcomputePostRedrawHook()\r\n\t\t\tcomputePostRedrawHook = null\r\n\t\t}\r\n\t\tlastRedrawId = null\r\n\t\tlastRedrawCallTime = new Date()\r\n\t\tm.redraw.strategy(\"diff\")\r\n\t}\r\n\r\n\tfunction endFirstComputation() {\r\n\t\tif (m.redraw.strategy() === \"none\") {\r\n\t\t\tpendingRequests--\r\n\t\t\tm.redraw.strategy(\"diff\")\r\n\t\t} else {\r\n\t\t\tm.endComputation()\r\n\t\t}\r\n\t}\r\n\r\n\tm.withAttr = function (prop, withAttrCallback, callbackThis) {\r\n\t\treturn function (e) {\r\n\t\t\te = e || window.event\r\n\t\t\t/* eslint-disable no-invalid-this */\r\n\t\t\tvar currentTarget = e.currentTarget || this\r\n\t\t\tvar _this = callbackThis || this\r\n\t\t\t/* eslint-enable no-invalid-this */\r\n\t\t\tvar target = prop in currentTarget ?\r\n\t\t\t\tcurrentTarget[prop] :\r\n\t\t\t\tcurrentTarget.getAttribute(prop)\r\n\t\t\twithAttrCallback.call(_this, target)\r\n\t\t}\r\n\t}\r\n\r\n\t// routing\r\n\tvar modes = {pathname: \"\", hash: \"#\", search: \"?\"}\r\n\tvar redirect = noop\r\n\tvar isDefaultRoute = false\r\n\tvar routeParams, currentRoute\r\n\r\n\tm.route = function (root, arg1, arg2, vdom) { // eslint-disable-line\r\n\t\t// m.route()\r\n\t\tif (arguments.length === 0) return currentRoute\r\n\t\t// m.route(el, defaultRoute, routes)\r\n\t\tif (arguments.length === 3 && isString(arg1)) {\r\n\t\t\tredirect = function (source) {\r\n\t\t\t\tvar path = currentRoute = normalizeRoute(source)\r\n\t\t\t\tif (!routeByValue(root, arg2, path)) {\r\n\t\t\t\t\tif (isDefaultRoute) {\r\n\t\t\t\t\t\tthrow new Error(\"Ensure the default route matches \" +\r\n\t\t\t\t\t\t\t\"one of the routes defined in m.route\")\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tisDefaultRoute = true\r\n\t\t\t\t\tm.route(arg1, true)\r\n\t\t\t\t\tisDefaultRoute = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar listener = m.route.mode === \"hash\" ?\r\n\t\t\t\t\"onhashchange\" :\r\n\t\t\t\t\"onpopstate\"\r\n\r\n\t\t\tglobal[listener] = function () {\r\n\t\t\t\tvar path = $location[m.route.mode]\r\n\t\t\t\tif (m.route.mode === \"pathname\") path += $location.search\r\n\t\t\t\tif (currentRoute !== normalizeRoute(path)) redirect(path)\r\n\t\t\t}\r\n\r\n\t\t\tcomputePreRedrawHook = setScroll\r\n\t\t\tglobal[listener]()\r\n\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// config: m.route\r\n\t\tif (root.addEventListener || root.attachEvent) {\r\n\t\t\tvar base = m.route.mode !== \"pathname\" ? $location.pathname : \"\"\r\n\t\t\troot.href = base + modes[m.route.mode] + vdom.attrs.href\r\n\t\t\tif (root.addEventListener) {\r\n\t\t\t\troot.removeEventListener(\"click\", routeUnobtrusive)\r\n\t\t\t\troot.addEventListener(\"click\", routeUnobtrusive)\r\n\t\t\t} else {\r\n\t\t\t\troot.detachEvent(\"onclick\", routeUnobtrusive)\r\n\t\t\t\troot.attachEvent(\"onclick\", routeUnobtrusive)\r\n\t\t\t}\r\n\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// m.route(route, params, shouldReplaceHistoryEntry)\r\n\t\tif (isString(root)) {\r\n\t\t\tvar oldRoute = currentRoute\r\n\t\t\tcurrentRoute = root\r\n\r\n\t\t\tvar args = arg1 || {}\r\n\t\t\tvar queryIndex = currentRoute.indexOf(\"?\")\r\n\t\t\tvar params\r\n\r\n\t\t\tif (queryIndex > -1) {\r\n\t\t\t\tparams = parseQueryString(currentRoute.slice(queryIndex + 1))\r\n\t\t\t} else {\r\n\t\t\t\tparams = {}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i in args) {\r\n\t\t\t\tif (hasOwn.call(args, i)) {\r\n\t\t\t\t\tparams[i] = args[i]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar querystring = buildQueryString(params)\r\n\t\t\tvar currentPath\r\n\r\n\t\t\tif (queryIndex > -1) {\r\n\t\t\t\tcurrentPath = currentRoute.slice(0, queryIndex)\r\n\t\t\t} else {\r\n\t\t\t\tcurrentPath = currentRoute\r\n\t\t\t}\r\n\r\n\t\t\tif (querystring) {\r\n\t\t\t\tcurrentRoute = currentPath +\r\n\t\t\t\t\t(currentPath.indexOf(\"?\") === -1 ? \"?\" : \"&\") +\r\n\t\t\t\t\tquerystring\r\n\t\t\t}\r\n\r\n\t\t\tvar replaceHistory =\r\n\t\t\t\t(arguments.length === 3 ? arg2 : arg1) === true ||\r\n\t\t\t\toldRoute === root\r\n\r\n\t\t\tif (global.history.pushState) {\r\n\t\t\t\tvar method = replaceHistory ? \"replaceState\" : \"pushState\"\r\n\t\t\t\tcomputePreRedrawHook = setScroll\r\n\t\t\t\tcomputePostRedrawHook = function () {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tglobal.history[method](null, $document.title,\r\n\t\t\t\t\t\t\tmodes[m.route.mode] + currentRoute)\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t// In the event of a pushState or replaceState failure,\r\n\t\t\t\t\t\t// fallback to a standard redirect. This is specifically\r\n\t\t\t\t\t\t// to address a Safari security error when attempting to\r\n\t\t\t\t\t\t// call pushState more than 100 times.\r\n\t\t\t\t\t\t$location[m.route.mode] = currentRoute\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tredirect(modes[m.route.mode] + currentRoute)\r\n\t\t\t} else {\r\n\t\t\t\t$location[m.route.mode] = currentRoute\r\n\t\t\t\tredirect(modes[m.route.mode] + currentRoute)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tm.route.param = function (key) {\r\n\t\tif (!routeParams) {\r\n\t\t\tthrow new Error(\"You must call m.route(element, defaultRoute, \" +\r\n\t\t\t\t\"routes) before calling m.route.param()\")\r\n\t\t}\r\n\r\n\t\tif (!key) {\r\n\t\t\treturn routeParams\r\n\t\t}\r\n\r\n\t\treturn routeParams[key]\r\n\t}\r\n\r\n\tm.route.mode = \"search\"\r\n\r\n\tfunction normalizeRoute(route) {\r\n\t\treturn route.slice(modes[m.route.mode].length)\r\n\t}\r\n\r\n\tfunction routeByValue(root, router, path) {\r\n\t\trouteParams = {}\r\n\r\n\t\tvar queryStart = path.indexOf(\"?\")\r\n\t\tif (queryStart !== -1) {\r\n\t\t\trouteParams = parseQueryString(\r\n\t\t\t\tpath.substr(queryStart + 1, path.length))\r\n\t\t\tpath = path.substr(0, queryStart)\r\n\t\t}\r\n\r\n\t\t// Get all routes and check if there's\r\n\t\t// an exact match for the current path\r\n\t\tvar keys = Object.keys(router)\r\n\t\tvar index = keys.indexOf(path)\r\n\r\n\t\tif (index !== -1){\r\n\t\t\tm.mount(root, router[keys [index]])\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tfor (var route in router) {\r\n\t\t\tif (hasOwn.call(router, route)) {\r\n\t\t\t\tif (route === path) {\r\n\t\t\t\t\tm.mount(root, router[route])\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar matcher = new RegExp(\"^\" + route\r\n\t\t\t\t\t.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\")\r\n\t\t\t\t\t.replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\")\r\n\r\n\t\t\t\tif (matcher.test(path)) {\r\n\t\t\t\t\t/* eslint-disable no-loop-func */\r\n\t\t\t\t\tpath.replace(matcher, function () {\r\n\t\t\t\t\t\tvar keys = route.match(/:[^\\/]+/g) || []\r\n\t\t\t\t\t\tvar values = [].slice.call(arguments, 1, -2)\r\n\t\t\t\t\t\tforEach(keys, function (key, i) {\r\n\t\t\t\t\t\t\trouteParams[key.replace(/:|\\./g, \"\")] =\r\n\t\t\t\t\t\t\t\tdecodeURIComponent(values[i])\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tm.mount(root, router[route])\r\n\t\t\t\t\t})\r\n\t\t\t\t\t/* eslint-enable no-loop-func */\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction routeUnobtrusive(e) {\r\n\t\te = e || event\r\n\t\tif (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return\r\n\r\n\t\tif (e.preventDefault) {\r\n\t\t\te.preventDefault()\r\n\t\t} else {\r\n\t\t\te.returnValue = false\r\n\t\t}\r\n\r\n\t\tvar currentTarget = e.currentTarget || e.srcElement\r\n\t\tvar args\r\n\r\n\t\tif (m.route.mode === \"pathname\" && currentTarget.search) {\r\n\t\t\targs = parseQueryString(currentTarget.search.slice(1))\r\n\t\t} else {\r\n\t\t\targs = {}\r\n\t\t}\r\n\r\n\t\twhile (currentTarget && !/a/i.test(currentTarget.nodeName)) {\r\n\t\t\tcurrentTarget = currentTarget.parentNode\r\n\t\t}\r\n\r\n\t\t// clear pendingRequests because we want an immediate route change\r\n\t\tpendingRequests = 0\r\n\t\tm.route(currentTarget[m.route.mode]\r\n\t\t\t.slice(modes[m.route.mode].length), args)\r\n\t}\r\n\r\n\tfunction setScroll() {\r\n\t\tif (m.route.mode !== \"hash\" && $location.hash) {\r\n\t\t\t$location.hash = $location.hash\r\n\t\t} else {\r\n\t\t\tglobal.scrollTo(0, 0)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction buildQueryString(object, prefix) {\r\n\t\tvar duplicates = {}\r\n\t\tvar str = []\r\n\r\n\t\tfor (var prop in object) {\r\n\t\t\tif (hasOwn.call(object, prop)) {\r\n\t\t\t\tvar key = prefix ? prefix + \"[\" + prop + \"]\" : prop\r\n\t\t\t\tvar value = object[prop]\r\n\r\n\t\t\t\tif (value === null) {\r\n\t\t\t\t\tstr.push(encodeURIComponent(key))\r\n\t\t\t\t} else if (isObject(value)) {\r\n\t\t\t\t\tstr.push(buildQueryString(value, key))\r\n\t\t\t\t} else if (isArray(value)) {\r\n\t\t\t\t\tvar keys = []\r\n\t\t\t\t\tduplicates[key] = duplicates[key] || {}\r\n\t\t\t\t\t/* eslint-disable no-loop-func */\r\n\t\t\t\t\tforEach(value, function (item) {\r\n\t\t\t\t\t\t/* eslint-enable no-loop-func */\r\n\t\t\t\t\t\tif (!duplicates[key][item]) {\r\n\t\t\t\t\t\t\tduplicates[key][item] = true\r\n\t\t\t\t\t\t\tkeys.push(encodeURIComponent(key) + \"=\" +\r\n\t\t\t\t\t\t\t\tencodeURIComponent(item))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tstr.push(keys.join(\"&\"))\r\n\t\t\t\t} else if (value !== undefined) {\r\n\t\t\t\t\tstr.push(encodeURIComponent(key) + \"=\" +\r\n\t\t\t\t\t\tencodeURIComponent(value))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn str.join(\"&\")\r\n\t}\r\n\r\n\tfunction parseQueryString(str) {\r\n\t\tif (str === \"\" || str == null) return {}\r\n\t\tif (str.charAt(0) === \"?\") str = str.slice(1)\r\n\r\n\t\tvar pairs = str.split(\"&\")\r\n\t\tvar params = {}\r\n\r\n\t\tforEach(pairs, function (string) {\r\n\t\t\tvar pair = string.split(\"=\")\r\n\t\t\tvar key = decodeURIComponent(pair[0])\r\n\t\t\tvar value = pair.length === 2 ? decodeURIComponent(pair[1]) : null\r\n\t\t\tif (params[key] != null) {\r\n\t\t\t\tif (!isArray(params[key])) params[key] = [params[key]]\r\n\t\t\t\tparams[key].push(value)\r\n\t\t\t}\r\n\t\t\telse params[key] = value\r\n\t\t})\r\n\r\n\t\treturn params\r\n\t}\r\n\r\n\tm.route.buildQueryString = buildQueryString\r\n\tm.route.parseQueryString = parseQueryString\r\n\r\n\tfunction reset(root) {\r\n\t\tvar cacheKey = getCellCacheKey(root)\r\n\t\tclear(root.childNodes, cellCache[cacheKey])\r\n\t\tcellCache[cacheKey] = undefined\r\n\t}\r\n\r\n\tm.deferred = function () {\r\n\t\tvar deferred = new Deferred()\r\n\t\tdeferred.promise = propify(deferred.promise)\r\n\t\treturn deferred\r\n\t}\r\n\r\n\tfunction propify(promise, initialValue) {\r\n\t\tvar prop = m.prop(initialValue)\r\n\t\tpromise.then(prop)\r\n\t\tprop.then = function (resolve, reject) {\r\n\t\t\treturn propify(promise.then(resolve, reject), initialValue)\r\n\t\t}\r\n\r\n\t\tprop.catch = prop.then.bind(null, null)\r\n\t\treturn prop\r\n\t}\r\n\t// Promiz.mithril.js | Zolmeister | MIT\r\n\t// a modified version of Promiz.js, which does not conform to Promises/A+\r\n\t// for two reasons:\r\n\t//\r\n\t// 1) `then` callbacks are called synchronously (because setTimeout is too\r\n\t//    slow, and the setImmediate polyfill is too big\r\n\t//\r\n\t// 2) throwing subclasses of Error cause the error to be bubbled up instead\r\n\t//    of triggering rejection (because the spec does not account for the\r\n\t//    important use case of default browser error handling, i.e. message w/\r\n\t//    line number)\r\n\r\n\tvar RESOLVING = 1\r\n\tvar REJECTING = 2\r\n\tvar RESOLVED = 3\r\n\tvar REJECTED = 4\r\n\r\n\tfunction Deferred(onSuccess, onFailure) {\r\n\t\tvar self = this\r\n\t\tvar state = 0\r\n\t\tvar promiseValue = 0\r\n\t\tvar next = []\r\n\r\n\t\tself.promise = {}\r\n\r\n\t\tself.resolve = function (value) {\r\n\t\t\tif (!state) {\r\n\t\t\t\tpromiseValue = value\r\n\t\t\t\tstate = RESOLVING\r\n\r\n\t\t\t\tfire()\r\n\t\t\t}\r\n\r\n\t\t\treturn self\r\n\t\t}\r\n\r\n\t\tself.reject = function (value) {\r\n\t\t\tif (!state) {\r\n\t\t\t\tpromiseValue = value\r\n\t\t\t\tstate = REJECTING\r\n\r\n\t\t\t\tfire()\r\n\t\t\t}\r\n\r\n\t\t\treturn self\r\n\t\t}\r\n\r\n\t\tself.promise.then = function (onSuccess, onFailure) {\r\n\t\t\tvar deferred = new Deferred(onSuccess, onFailure)\r\n\r\n\t\t\tif (state === RESOLVED) {\r\n\t\t\t\tdeferred.resolve(promiseValue)\r\n\t\t\t} else if (state === REJECTED) {\r\n\t\t\t\tdeferred.reject(promiseValue)\r\n\t\t\t} else {\r\n\t\t\t\tnext.push(deferred)\r\n\t\t\t}\r\n\r\n\t\t\treturn deferred.promise\r\n\t\t}\r\n\r\n\t\tfunction finish(type) {\r\n\t\t\tstate = type || REJECTED\r\n\t\t\tnext.map(function (deferred) {\r\n\t\t\t\tif (state === RESOLVED) {\r\n\t\t\t\t\tdeferred.resolve(promiseValue)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdeferred.reject(promiseValue)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tfunction thennable(then, success, failure, notThennable) {\r\n\t\t\tif (((promiseValue != null && isObject(promiseValue)) ||\r\n\t\t\t\t\tisFunction(promiseValue)) && isFunction(then)) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// count protects against abuse calls from spec checker\r\n\t\t\t\t\tvar count = 0\r\n\t\t\t\t\tthen.call(promiseValue, function (value) {\r\n\t\t\t\t\t\tif (count++) return\r\n\t\t\t\t\t\tpromiseValue = value\r\n\t\t\t\t\t\tsuccess()\r\n\t\t\t\t\t}, function (value) {\r\n\t\t\t\t\t\tif (count++) return\r\n\t\t\t\t\t\tpromiseValue = value\r\n\t\t\t\t\t\tfailure()\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t\t\tpromiseValue = e\r\n\t\t\t\t\tfailure()\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnotThennable()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction fire() {\r\n\t\t\t// check if it's a thenable\r\n\t\t\tvar then\r\n\t\t\ttry {\r\n\t\t\t\tthen = promiseValue && promiseValue.then\r\n\t\t\t} catch (e) {\r\n\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t\tpromiseValue = e\r\n\t\t\t\tstate = REJECTING\r\n\t\t\t\treturn fire()\r\n\t\t\t}\r\n\r\n\t\t\tif (state === REJECTING) {\r\n\t\t\t\tm.deferred.onerror(promiseValue)\r\n\t\t\t}\r\n\r\n\t\t\tthennable(then, function () {\r\n\t\t\t\tstate = RESOLVING\r\n\t\t\t\tfire()\r\n\t\t\t}, function () {\r\n\t\t\t\tstate = REJECTING\r\n\t\t\t\tfire()\r\n\t\t\t}, function () {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (state === RESOLVING && isFunction(onSuccess)) {\r\n\t\t\t\t\t\tpromiseValue = onSuccess(promiseValue)\r\n\t\t\t\t\t} else if (state === REJECTING && isFunction(onFailure)) {\r\n\t\t\t\t\t\tpromiseValue = onFailure(promiseValue)\r\n\t\t\t\t\t\tstate = RESOLVING\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t\t\tpromiseValue = e\r\n\t\t\t\t\treturn finish()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (promiseValue === self) {\r\n\t\t\t\t\tpromiseValue = TypeError()\r\n\t\t\t\t\tfinish()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthennable(then, function () {\r\n\t\t\t\t\t\tfinish(RESOLVED)\r\n\t\t\t\t\t}, finish, function () {\r\n\t\t\t\t\t\tfinish(state === RESOLVING && RESOLVED)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tm.deferred.onerror = function (e) {\r\n\t\tif (type.call(e) === \"[object Error]\" &&\r\n\t\t\t\t!/ Error/.test(e.constructor.toString())) {\r\n\t\t\tpendingRequests = 0\r\n\t\t\tthrow e\r\n\t\t}\r\n\t}\r\n\r\n\tm.sync = function (args) {\r\n\t\tvar deferred = m.deferred()\r\n\t\tvar outstanding = args.length\r\n\t\tvar results = []\r\n\t\tvar method = \"resolve\"\r\n\r\n\t\tfunction synchronizer(pos, resolved) {\r\n\t\t\treturn function (value) {\r\n\t\t\t\tresults[pos] = value\r\n\t\t\t\tif (!resolved) method = \"reject\"\r\n\t\t\t\tif (--outstanding === 0) {\r\n\t\t\t\t\tdeferred.promise(results)\r\n\t\t\t\t\tdeferred[method](results)\r\n\t\t\t\t}\r\n\t\t\t\treturn value\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (args.length > 0) {\r\n\t\t\tforEach(args, function (arg, i) {\r\n\t\t\t\targ.then(synchronizer(i, true), synchronizer(i, false))\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tdeferred.resolve([])\r\n\t\t}\r\n\r\n\t\treturn deferred.promise\r\n\t}\r\n\r\n\tfunction identity(value) { return value }\r\n\r\n\tfunction handleJsonp(options) {\r\n\t\tvar callbackKey = options.callbackName || \"mithril_callback_\" +\r\n\t\t\tnew Date().getTime() + \"_\" +\r\n\t\t\t(Math.round(Math.random() * 1e16)).toString(36)\r\n\r\n\t\tvar script = $document.createElement(\"script\")\r\n\r\n\t\tglobal[callbackKey] = function (resp) {\r\n\t\t\tscript.parentNode.removeChild(script)\r\n\t\t\toptions.onload({\r\n\t\t\t\ttype: \"load\",\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tresponseText: resp\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tglobal[callbackKey] = undefined\r\n\t\t}\r\n\r\n\t\tscript.onerror = function () {\r\n\t\t\tscript.parentNode.removeChild(script)\r\n\r\n\t\t\toptions.onerror({\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tstatus: 500,\r\n\t\t\t\t\tresponseText: JSON.stringify({\r\n\t\t\t\t\t\terror: \"Error making jsonp request\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tglobal[callbackKey] = undefined\r\n\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tscript.onload = function () {\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tscript.src = options.url +\r\n\t\t\t(options.url.indexOf(\"?\") > 0 ? \"&\" : \"?\") +\r\n\t\t\t(options.callbackKey ? options.callbackKey : \"callback\") +\r\n\t\t\t\"=\" + callbackKey +\r\n\t\t\t\"&\" + buildQueryString(options.data || {})\r\n\r\n\t\t$document.body.appendChild(script)\r\n\t}\r\n\r\n\tfunction createXhr(options) {\r\n\t\tvar xhr = new global.XMLHttpRequest()\r\n\t\txhr.open(options.method, options.url, true, options.user,\r\n\t\t\toptions.password)\r\n\r\n\t\txhr.onreadystatechange = function () {\r\n\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\tif (xhr.status >= 200 && xhr.status < 300) {\r\n\t\t\t\t\toptions.onload({type: \"load\", target: xhr})\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptions.onerror({type: \"error\", target: xhr})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (options.serialize === JSON.stringify &&\r\n\t\t\t\toptions.data &&\r\n\t\t\t\toptions.method !== \"GET\") {\r\n\t\t\txhr.setRequestHeader(\"Content-Type\",\r\n\t\t\t\t\"application/json; charset=utf-8\")\r\n\t\t}\r\n\r\n\t\tif (options.deserialize === JSON.parse) {\r\n\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\r\n\t\t}\r\n\r\n\t\tif (isFunction(options.config)) {\r\n\t\t\tvar maybeXhr = options.config(xhr, options)\r\n\t\t\tif (maybeXhr != null) xhr = maybeXhr\r\n\t\t}\r\n\r\n\t\tvar data = options.method === \"GET\" || !options.data ? \"\" : options.data\r\n\r\n\t\tif (data && !isString(data) && data.constructor !== global.FormData) {\r\n\t\t\tthrow new Error(\"Request data should be either be a string or \" +\r\n\t\t\t\t\"FormData. Check the `serialize` option in `m.request`\")\r\n\t\t}\r\n\r\n\t\txhr.send(data)\r\n\t\treturn xhr\r\n\t}\r\n\r\n\tfunction ajax(options) {\r\n\t\tif (options.dataType && options.dataType.toLowerCase() === \"jsonp\") {\r\n\t\t\treturn handleJsonp(options)\r\n\t\t} else {\r\n\t\t\treturn createXhr(options)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction bindData(options, data, serialize) {\r\n\t\tif (options.method === \"GET\" && options.dataType !== \"jsonp\") {\r\n\t\t\tvar prefix = options.url.indexOf(\"?\") < 0 ? \"?\" : \"&\"\r\n\t\t\tvar querystring = buildQueryString(data)\r\n\t\t\toptions.url += (querystring ? prefix + querystring : \"\")\r\n\t\t} else {\r\n\t\t\toptions.data = serialize(data)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parameterizeUrl(url, data) {\r\n\t\tif (data) {\r\n\t\t\turl = url.replace(/:[a-z]\\w+/gi, function (token){\r\n\t\t\t\tvar key = token.slice(1)\r\n\t\t\t\tvar value = data[key] || token\r\n\t\t\t\tdelete data[key]\r\n\t\t\t\treturn value\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn url\r\n\t}\r\n\r\n\tm.request = function (options) {\r\n\t\tif (options.background !== true) m.startComputation()\r\n\t\tvar deferred = new Deferred()\r\n\t\tvar isJSONP = options.dataType &&\r\n\t\t\toptions.dataType.toLowerCase() === \"jsonp\"\r\n\r\n\t\tvar serialize, deserialize, extract\r\n\r\n\t\tif (isJSONP) {\r\n\t\t\tserialize = options.serialize =\r\n\t\t\tdeserialize = options.deserialize = identity\r\n\r\n\t\t\textract = function (jsonp) { return jsonp.responseText }\r\n\t\t} else {\r\n\t\t\tserialize = options.serialize = options.serialize || JSON.stringify\r\n\r\n\t\t\tdeserialize = options.deserialize =\r\n\t\t\t\toptions.deserialize || JSON.parse\r\n\t\t\textract = options.extract || function (xhr) {\r\n\t\t\t\tif (xhr.responseText.length || deserialize !== JSON.parse) {\r\n\t\t\t\t\treturn xhr.responseText\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\toptions.method = (options.method || \"GET\").toUpperCase()\r\n\t\toptions.url = parameterizeUrl(options.url, options.data)\r\n\t\tbindData(options, options.data, serialize)\r\n\t\toptions.onload = options.onerror = function (ev) {\r\n\t\t\ttry {\r\n\t\t\t\tev = ev || event\r\n\t\t\t\tvar response = deserialize(extract(ev.target, options))\r\n\t\t\t\tif (ev.type === \"load\") {\r\n\t\t\t\t\tif (options.unwrapSuccess) {\r\n\t\t\t\t\t\tresponse = options.unwrapSuccess(response, ev.target)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (isArray(response) && options.type) {\r\n\t\t\t\t\t\tforEach(response, function (res, i) {\r\n\t\t\t\t\t\t\tresponse[i] = new options.type(res)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (options.type) {\r\n\t\t\t\t\t\tresponse = new options.type(response)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeferred.resolve(response)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (options.unwrapError) {\r\n\t\t\t\t\t\tresponse = options.unwrapError(response, ev.target)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeferred.reject(response)\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tdeferred.reject(e)\r\n\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t} finally {\r\n\t\t\t\tif (options.background !== true) m.endComputation()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tajax(options)\r\n\t\tdeferred.promise = propify(deferred.promise, options.initialValue)\r\n\t\treturn deferred.promise\r\n\t}\r\n\r\n\treturn m\r\n}); // eslint-disable-line\r\n","// Event listener wrapper which returns a function to unbind the supplied handler(s)\r\n\r\n// Overloads:\r\n// * on( el, { keyN : handlerN... } )\r\n// * on( [ elN, key, handler ]... )\r\n// * on( [ elN, { keyN : handlerN } ]... )\r\n\r\nexport default function on( el, key, handler, capture = false ){\r\n       if( el instanceof Array ){\r\n    const offs = [ ...arguments ].map( x => on( ...x ) )\r\n\r\n    return () =>\r\n      offs.map( x => x() )\r\n  }\r\n  else if( typeof key === 'string' ){\r\n    if( key.match( /\\s+/ ) )\r\n      return key.split( /\\s+/ ).map( key =>\r\n        on( el, key, handler, capture )\r\n      )\r\n\r\n    el.addEventListener( key, handler, capture )\r\n\r\n    return () =>\r\n      el.removeEventListener( key, handler, capture )\r\n  }\r\n  else {\r\n    const offs = []\r\n    const hash = key\r\n\r\n    for( const key in hash )\r\n      if( hash.hasOwnProperty( key ) )\r\n        offs.push( on( el, key, hash[ key ], capture ) )\r\n\r\n    return () =>\r\n      offs.map( x => x() )\r\n  }\r\n}\r\n","export default el =>\r\n  el.getBoundingClientRect()\r\n","import on from './on'\r\n\r\nconst noop = () => {}\r\n\r\nexport default ( el, {\r\n  drag  = noop,\r\n  drop  = noop,\r\n  start = noop\r\n} ) => {\r\n  let down = false\r\n  let move = false\r\n\r\n  return on(\r\n    [ el,     {\r\n      mousedown : () => {\r\n        down = true\r\n      }\r\n    } ],\r\n\r\n    [ window, {\r\n      mousemove : e => {\r\n        if( down ){\r\n          if( !move )\r\n            start( e )\r\n\r\n          move = true\r\n\r\n          drag( e )\r\n        }\r\n      },\r\n\r\n      mouseup   : e => {\r\n        down = false\r\n\r\n        if( move ){\r\n          move = false\r\n\r\n          drop( e )\r\n\r\n          e.preventDefault()\r\n        }\r\n      }\r\n    } ]\r\n  )\r\n}\r\n","import m from 'mithril'\r\n\r\nimport on     from '../utils/on'\r\nimport box    from '../utils/box'\r\nimport dragon from '../utils/drag'\r\n\r\nconst locate = ( x, y ) => [\r\n  Math.round( x / window.innerWidth ),\r\n  Math.round( y / window.innerHeight )\r\n]\r\n\r\nconst styles = {\r\n  controls : {\r\n    position   : 'fixed',\r\n    background : '#fff',\r\n    border     : '1px solid',\r\n    color      : '#eee'\r\n  },\r\n\r\n  handle : `\r\n    padding    : .5em 1em;\r\n    cursor     : -webkit-grab;\r\n    cursor     : grab;\r\n    border     : 1px solid;\r\n  `,\r\n\r\n  loupe : {\r\n    padding    : '.5em 1em',\r\n    border     : '1px solid'\r\n  },\r\n\r\n  loupe_active : {\r\n    color      : '#ccf'\r\n  },\r\n\r\n  shadow : {\r\n    transition : '.15s ease-in-out',\r\n    opacity    : '0',\r\n    position   : 'fixed',\r\n    boxShadow  : 'rgba( 0, 0, 0, .5 ) 0 0 50vh 25vh',\r\n    width      : '0',\r\n    height     : '0'\r\n  },\r\n\r\n  screen : {\r\n    position   : 'fixed'\r\n  },\r\n\r\n  screen_active : {\r\n    background : 'red'\r\n  }\r\n}\r\n\r\nexport default {\r\n  controller : function(){\r\n    Object.assign( this, {\r\n      controls : [ 1, 0 ],\r\n      shadow   : [ 1, 0 ],\r\n\r\n      dragging   : false,\r\n      inspecting : false,\r\n\r\n      inspection : { top : 0, left : 0, width : '100%' },\r\n\r\n      hover : e => {\r\n        this.dragging = true\r\n        this.shadow = locate( e.pageX, e.pageY )\r\n\r\n        m.redraw()\r\n      },\r\n\r\n      place : e => {\r\n        this.dragging = false\r\n        this.controls = [ ...this.shadow ]\r\n\r\n        m.redraw()\r\n      }\r\n    } )\r\n  },\r\n\r\n  view : ctrl =>\r\n    m( '.Widget', {\r\n      config( el, init, ctxt ){\r\n        ctxt.onunload = on( window, {\r\n          mouseover : e =>\r\n            ctrl.inspection = box( e.target ),\r\n\r\n          click     : e => {\r\n            if( ctrl.inspecting ){\r\n              e.preventDefault()\r\n\r\n              ctrl.inspecting = false\r\n            }\r\n          }\r\n        }, true )\r\n      }\r\n    },\r\n      m( '.controls', {\r\n        style : {\r\n          ...styles.controls,\r\n          ...( ctrl.controls[ 0 ] ? { right  : 0 } : { left : 0 } ),\r\n          ...( ctrl.controls[ 1 ] ? { bottom : 0 } : { top  : 0 } )\r\n        }\r\n      },\r\n        m( '.handle', {\r\n          config( el, init, ctxt ){\r\n            ctxt.onunload = dragon( el, {\r\n              drag : ctrl.hover,\r\n              drop : ctrl.place\r\n            } )\r\n          },\r\n\r\n          style : styles.handle\r\n        } ),\r\n\r\n        m( '.loupe', {\r\n          onclick(){\r\n            ctrl.inspecting = !ctrl.inspecting\r\n          },\r\n\r\n          style : {\r\n            ...styles.loupe,\r\n            ...( ctrl.inspecting && styles.loupe_active )\r\n          }\r\n        } )\r\n      ),\r\n\r\n      m( '.screen', {\r\n        style : {\r\n          ...styles.screen,\r\n          ...ctrl.screen,\r\n          ...( ctrl.inspecting && styles.screen_active ),\r\n\r\n          top   : ctrl.inspection.top,\r\n          left  : ctrl.inspection.left,\r\n          width : ctrl.inspection.width\r\n        }\r\n      } ),\r\n\r\n      m( '.shadow', {\r\n        style : {\r\n          ...styles.shadow,\r\n\r\n          opacity : ctrl.dragging ? 1 : 0,\r\n          left    : ctrl.shadow[ 0 ] * 100 + '%',\r\n          top     : ctrl.shadow[ 1 ] * 100 + '%'\r\n        }\r\n      } )\r\n    )\r\n}\r\n","import m      from 'mithril'\r\nimport widget from './view/widget'\r\n\r\nm.mount(\r\n  document.head.appendChild(\r\n    document.createElement( 'div' )\r\n  ),\r\n\r\n  {\r\n    view : ctrl => [\r\n      m( 'style', 'head { display: block }' ),\r\n      m( widget )\r\n    ]\r\n  }\r\n)\r\n\r\nm.mount( document.body, {\r\n  view : () => [\r\n    m( 'h1', 'Hi!' )\r\n  ]\r\n} )\r\n"],"names":["this","arguments","const","offs","key","let"],"mappings":"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"}